"use strict";var _createClass=function(){function l(e,i){for(var t=0;t<i.length;t++){var l=i[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,i,t){return i&&l(e.prototype,i),t&&l(e,t),e}}();function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function positiveMod(e,i){return(e%i+i)%i}var Field=function(){function t(e,i){_classCallCheck(this,t),this.field=[],this.updateSize(e,i)}return _createClass(t,[{key:"forEach",value:function(e){for(var i=0;i<this.field.length;i++)for(var t=0;t<this.field[i].length;t++)e(i,t,this.field[i][t])}},{key:"randomInit",value:function(t){var l=this;this.forEach(function(e,i){l.field[e][i]=Math.random()<=t})}},{key:"updateSize",value:function(e,i){if(this.field=this.field.slice(0,e),this.field.length<e){var t=new Array(e-this.field.length).fill([]);Array.prototype.push.apply(this.field,t)}for(var l=0;l<this.field.length;l++)if(this.field[l]=this.field[l].slice(0,i),this.field[l].length<i){var r=new Array(i-this.field[l].length).fill(!1);Array.prototype.push.apply(this.field[l],r)}}},{key:"step",value:function(e,i){for(var t=[],l=[],r=0;r<this.field.length;r++){for(var n=[],a=0;a<this.field[r].length;a++){var f=this.getNeighborsCount(r,a,e),s=3===f||2===f&&this.field[r][a];if(n.push(s),s!==this.field[r][a]){var h=new FieldUpdate(r,a,s);t.push(h)}i&&(this.field[r][a]=s)}l.push(n)}return this.field=l,t}},{key:"setPattern",value:function(e,i,t){var l=[],r=!0,n=!1,a=void 0;try{for(var f,s=e[Symbol.iterator]();!(r=(f=s.next()).done);r=!0){var h=f.value,o=h[0]+i,u=h[1]+t;if(this.isInBounds(o,u)){this.field[o][u]=!0;var d=new FieldUpdate(o,u,!0);l.push(d)}}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return l}},{key:"isInBounds",value:function(e,i){return 0<=e&&e<this.field.length&&0<=i&&i<this.field[e].length}},{key:"flipCell",value:function(e,i){return this.isInBounds(e,i)?(this.field[e][i]=!this.field[e][i],new FieldUpdate(e,i,this.field[e][i])):null}},{key:"getNeighborsCount",value:function(e,i,t){var l=[e-1,e,e+1],r=[i-1,i,i+1],n=0,a=!0,f=!1,s=void 0;try{for(var h,o=l[Symbol.iterator]();!(a=(h=o.next()).done);a=!0){var u=h.value;if(t||!(u<0||u>=this.field.length)){var d=positiveMod(u,this.field.length),v=!0,c=!1,y=void 0;try{for(var p,g=r[Symbol.iterator]();!(v=(p=g.next()).done);v=!0){var k=p.value;if(t||!(k<0||k>=this.field[d].length)){var w=positiveMod(k,this.field[d].length);!0!==this.field[d][w]||d===e&&w===i||(n+=1)}}}catch(e){c=!0,y=e}finally{try{!v&&g.return&&g.return()}finally{if(c)throw y}}}}}catch(e){f=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(f)throw s}}return n}}]),t}(),FieldUpdate=function e(i,t,l){_classCallCheck(this,e),this.row=i,this.column=t,this.isAlive=l};